let hexRadiusSlider,qualitySlider,tileModeSlider,image_1,image_2,image_3,image_4,image_5,image_6,image_7,image_8,image_9,image_10,image_11,image_12,image_13,image_14,image_15,image_16,image_17,image_18,image_19,image_20,image_21,image_22,image_23,image_24,image_25,image_26,image_27,image_28,x_offset_slider,y_offset_slider,tile_offset_slider,tile_color_slider,tile_space_slider,tile_color_slider_value,tiles=[],pixel_density=1,tile_mode=1,print_size="A4",inner_hex_ratio=.24;const paperSizes={A0:{w:841,h:1189},A1:{w:594,h:841},A2:{w:420,h:594},A3:{w:297,h:420},A4:{w:210,h:297},A5:{w:148,h:210},A6:{w:105,h:148},A7:{w:74,h:105},A8:{w:52,h:74},A9:{w:37,h:52},A10:{w:26,h:37}};function preload(){image_1=loadImage("1_Y.png"),image_2=loadImage("2_Y.png"),image_3=loadImage("3_Y.png"),image_4=loadImage("4_Y.png"),image_5=loadImage("5_Y.png"),image_6=loadImage("6_Y.png"),image_7=loadImage("1_R.png"),image_8=loadImage("2_R.png"),image_9=loadImage("3_R.png"),image_10=loadImage("4_R.png"),image_11=loadImage("5_R.png"),image_12=loadImage("6_R.png"),image_13=loadImage("1_G.png"),image_14=loadImage("2_G.png"),image_15=loadImage("3_G.png"),image_16=loadImage("4_G.png"),image_17=loadImage("5_G.png"),image_18=loadImage("6_G.png"),image_19=loadImage("1_B.png"),image_20=loadImage("2_B.png"),image_21=loadImage("3_B.png"),image_22=loadImage("4_B.png"),image_23=loadImage("5_B.png"),image_24=loadImage("6_B.png"),image_25=loadImage("house_1.png"),image_26=loadImage("house_2.png"),image_27=loadImage("house_3.png"),image_28=loadImage("house_4.png")}function setup(){const e=new URLSearchParams(window.location.search);e.has("size")&&paperSizes[e.get("size").toUpperCase()]&&(print_size=e.get("size").toUpperCase());let i=mmToPx(paperSizes[print_size].w),l=mmToPx(paperSizes[print_size].h);load_images(1),createCanvas(i,l),angleMode(DEGREES),pixelDensity(8),hexRadiusSlider=createSlider(.1,15,15,.05),hexRadiusSlider.position(10,10),qualitySlider=createSlider(1,20,1,.5),qualitySlider.position(10,50),tileModeSlider=createSlider(1,2,1,1),tileModeSlider.position(10,90),x_offset_slider=createSlider(0,4,0,.1),x_offset_slider.position(10,130),y_offset_slider=createSlider(0,4,0,.1),y_offset_slider.position(10,170),tile_offset_slider=createSlider(0,20,0,1),tile_offset_slider.position(10,210),tile_color_slider=createSlider(1,5,1,1),tile_color_slider.position(10,250),tile_space_slider=createSlider(0,20,1,.1),tile_space_slider.position(10,290),createP("").id("radiusLabel").position(180,-5),createP("").id("qualitySlider").position(180,30),createP("").id("tileModeSlider").position(180,70),createP("").id("x_offset_slider").position(180,110),createP("").id("y_offset_slider").position(180,150),createP("").id("tile_offset_slider").position(180,190),createP("").id("tile_color_slider").position(180,230),createP("").id("tile_space_slider").position(180,275),createP("").id("inner_tile_size").position(14,310),tile_color_slider_value=tile_color_slider.value()}function draw(){tile_color_slider.value()!==tile_color_slider_value&&load_images(tile_color_slider.value()),background(255);let e=10*hexRadiusSlider.value();width,height;drawHexGrid(e),select("#radiusLabel").html("Hexagon radius: "+round(.65*hexRadiusSlider.value(),2)+" cm"),select("#qualitySlider").html("Quality: "+qualitySlider.value()),select("#tileModeSlider").html("Tile Mode: "+tileModeSlider.value()),select("#x_offset_slider").html("x Offset: "+x_offset_slider.value()),select("#y_offset_slider").html("Y Offset: "+y_offset_slider.value()),select("#tile_offset_slider").html("Tile Offset: "+tile_offset_slider.value()),select("#tile_color_slider").html("Tile House: "+tile_color_slider.value()),select("#tile_space_slider").html("Tile Space: "+tile_space_slider.value()+" mm"),select("#inner_tile_size").html("Inner Tile Size: "+round(.65*hexRadiusSlider.value()*inner_hex_ratio,2)+" cm"),tile_mode=tileModeSlider.value(),qualitySlider.value()!=pixel_density&&pixelDensity(qualitySlider.value()),pixel_density=qualitySlider.value(),tile_color_slider_value=tile_color_slider.value()}function drawHexGrid(e){let i=2*e,l=sqrt(3)*e,a=0,_=[];for(let t=1.4*-e-x_offset_slider.value()*e;t<width+e+x_offset_slider.value()*e;t+=i/1.33+tile_space_slider.value()){for(let i=.85*-e-y_offset_slider.value()*e;i<height+e+y_offset_slider.value()*e;i+=l+tile_space_slider.value())a%2==0?(_.push({x:t,y:i,radius:e}),2==tile_mode&&drawHexagonTile(t,i,e,tiles[(a+tile_offset_slider.value())%tiles.length])):(_.push({x:t,y:i+l/2,radius:e}),2==tile_mode&&drawHexagonTile(t,i+l/2,e,tiles[(a+tile_offset_slider.value())%tiles.length]));a++}if(1==tile_mode){_=groupAndSortByY(_);for(let e=0;e<_.length;e++){let i=_[e];for(let l=0;l<i.length;l++){let a=i[l];drawHexagonTile(a.x,a.y,a.radius,tiles[parseInt((e+1+tile_offset_slider.value())/2)%tiles.length])}}}}function drawHexagonTile(e,i,l,a){let _=a.width,t=a.height;l*=2;image(a,e,i,l,l*(t/_))}function mmToPx(e){return 2.83465*e}function groupAndSortByY(e){e.sort(((e,i)=>e.y-i.y));let i=[],l=e[0]?.y,a=[];return e.forEach((e=>{e.y===l?a.push(e):(i.push(a),a=[e],l=e.y)})),a.length>0&&i.push(a),i}function load_images(e){tiles=[],1==e?tiles.push(image_1,image_2,image_3,image_4,image_5,image_6):2==e?tiles.push(image_7,image_8,image_9,image_10,image_11,image_12):3==e?tiles.push(image_13,image_14,image_15,image_16,image_17,image_18):4==e?tiles.push(image_19,image_20,image_21,image_22,image_23,image_24):5==e&&tiles.push(image_25,image_26,image_27,image_28)}function keyTyped(){"s"===key&&save("image")}